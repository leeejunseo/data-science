# 6DOF 미사일 궤적 시뮬레이션 프로젝트

## 프로젝트 소개

본 프로젝트는 **3자유도(3DoF) 탄도 미사일 시뮬레이션을 6자유도(6DoF)로 확장**하여 회전 운동(롤, 피치, 요)을 포함한 고정밀 미사일 궤적 시뮬레이션 시스템을 구현합니다. 기존 3DoF 모델은 미사일을 질점으로 가정하여 병진 운동만 고려했지만, 본 프로젝트는 오일러 각도 기반 자세 시스템, 공력 모멘트 계산, 관성 텐서를 도입하여 실제 미사일의 복잡한 비행 역학을 정확히 모델링합니다. 이를 통해 SCUD-B, NODONG, KN-23 등 북한 탄도미사일의 궤적 특성을 분석하고, 머신러닝 학습을 위한 고품질 시뮬레이션 데이터를 생성할 수 있습니다.

**해결하려는 문제**: 기존 3DoF 시뮬레이션의 한계(회전 운동 무시, 자세 불안정성 미반영)를 극복하고, 실제 미사일 비행의 물리적 현상을 정확히 재현하여 탄도미사일 방어 시스템 연구 및 궤적 예측 모델 개발에 기여합니다.

-----

## 주요 기능

### 1\. **6자유도 물리 엔진**

  - **병진 운동 (3DoF)**: 속도(V), 비행경로각(γ), 방위각(ψ), 위치(x, y, h) 계산
  - **회전 운동 (3DoF)**: 롤(φ), 피치(θ), 요(ψ) 오일러 각도 및 각속도(p, q, r) 계산
  - **14차원 상태 벡터**: 병진 6차원 + 회전 6차원 + 질량 2차원 통합 관리
  - **공력 모멘트**: 받음각/측면 받음각 기반 롤/피치/요 모멘트 계산
  - **오일러 방정식**: 자이로스코픽 효과를 포함한 회전 동역학 구현

### 2\. **4단계 비행 프로그램**

  - **수직 상승 단계**: 발사대에서 수직으로 상승 (0\~5초)
  - **피치 전환 단계**: 목표 피치각으로 자세 변경 (5\~15초)
  - **등자세 비행 단계**: 일정 자세 유지하며 추력 비행 (15\~60초)
  - **중간단계 비행**: 추력 종료 후 관성 비행 및 대기권 재진입 (\~1500초)
  - **RK45 수치 적분**: scipy.integrate.solve\_ivp를 활용한 고정밀 궤적 계산
  - **안정화 개선**: 78km 멈춤 버그 수정, 공력 모멘트 계산 안정화

### 3\. **다중 미사일 지원**

  - **SCUD-B**: 사거리 300km, 단거리 탄도미사일
  - **NODONG**: 사거리 1,300km, 중거리 탄도미사일
  - **KN-23**: 사거리 690km, 준탄도 미사일 (낮은 궤적)
  - 각 미사일별 추력 프로파일, 관성 모멘트, 공력 계수 데이터베이스 구축

### 4\. **고급 시각화 시스템**

  - **12-패널 통합 그래프**: 3D 궤적, 속도, 고도, 비행경로각, 롤/피치/요 각도, 각속도, 질량 변화 등
  - **실시간 저장**: 고해상도(300 DPI) PNG 이미지로 결과 저장
  - **matplotlib 기반**: 과학적 시각화 표준 라이브러리 활용

### 5\. **물리 모델 검증**

  - **표준 대기 모델 (ISA)**: 고도별 대기 밀도, 온도, 압력 계산
  - **마하수 기반 항력 계수**: 초음속/천음속 영역 항력 변화 반영
  - **에너지 보존 검증**: 운동 에너지 + 위치 에너지 추적
  - **특이점 처리**: 짐벌락 방지를 위한 오일러 각도 안정화

-----

## 시스템 요구사항

### Python 환경

  - **Python 3.9+** (권장: Python 3.10 이상)
  - **운영체제**: Windows 10/11, macOS, Linux (Ubuntu 20.04+)

### 필수 라이브러리

```
numpy>=1.24.0          # 수치 계산 및 배열 연산
scipy>=1.10.0          # 수치 적분 (solve_ivp)
matplotlib>=3.7.0      # 시각화
```

### 선택적 라이브러리

```
tqdm>=4.65.0            # 진행 표시 (데이터 생성 시)
pandas>=2.0.0          # 데이터 분석 (선택)
```

### 하드웨어 권장사항

  - **CPU**: 2 GHz 이상 (멀티코어 권장)
  - **RAM**: 4 GB 이상 (8 GB 권장)
  - **저장공간**: 500 MB 이상 (시뮬레이션 결과 저장용)

-----

## 설치 및 실행

### 1\. 저장소 클론

```bash
git clone https://github.com/leeejunseo/data-science.git
cd data-science/leejunseo
```

### 2\. 의존성 설치

```bash
pip install -r requirements.txt
```

또는 개별 설치:

```bash
pip install numpy scipy matplotlib
```

### 3\. 프로그램 실행

#### 기본 실행 (SCUD-B, 발사각 45°)

```bash
python main_fixed.py
```

#### 사용자 정의 실행 예시

```python
from main_fixed import MissileSimulation6DOF

# 시뮬레이션 객체 생성
sim = MissileSimulation6DOF(missile_type="NODONG", apply_errors=False)

# 초기화 (발사각 60°, 방위각 90°)
sim.initialize_simulation(launch_angle_deg=60, azimuth_deg=90, sim_time=1500)

# 시뮬레이션 실행
results = sim.run_simulation()

# 결과 시각화
sim.plot_results_6dof()

# 결과 출력
print(f"최종 사거리: {results['x'][-1]/1000:.2f} km")
print(f"최대 고도: {max(results['h'])/1000:.2f} km")
```

### 4\. 실행 결과

시뮬레이션 실행 후 다음과 같은 출력을 확인할 수 있습니다:

```
============================================================
6DOF 미사일 시뮬레이션 시작
============================================================
1단계: 수직상승
2단계: 피치 전환
3단계: 등자세 비행
4단계: 중간단계 비행
지면 충돌 감지: 652.34초
시뮬레이션 계산 완료! 전체 비행 시간: 652.34초

============================================================
6DOF 시뮬레이션 결과 요약
============================================================
최종 사거리: 298.45 km
최대 고도: 87.23 km
최종 속도: 1456.78 m/s
비행 시간: 652.34 s
최종 롤각: 0.12°
최종 피치각: -78.45°
최종 요각: 90.03°
============================================================
```

**결과 파일**: `results_6dof/6dof_results_YYYYMMDD_HHMMSS.png`

-----

## 프로젝트 구조

```
JJINleejunseo/
│
├── main_fixed.py             # 6DOF 시뮬레이션 메인 파일 (978줄)
│    ├── MissileSimulation6DOF 클래스
│    ├── 4단계 동역학 함수 (vertical, pitch, constant, midcourse)
│    ├── 공력 모멘트 계산 (calculate_aerodynamic_moments - 안정화)
│    ├── 오일러 각도 변환 (calculate_euler_rates - 짐벌락 방지)
│    ├── 실시간 시각화 (run_simulation_realtime)
│    └── 상세 시각화 (plot_results_6dof)
│
├── config_6dof.py            # 물리 모델 및 미사일 데이터 (445줄)
│     ├── PhysicsUtils 클래스 (대기 모델, 중력, 음속)
│     ├── StateVector6DOF 클래스 (14차원 상태 벡터 관리)
│     └── MISSILE_TYPES 데이터베이스 (SCUD-B, NODONG, KN-23)
│
├── compare_3dof_6dof.py      # 3DoF vs 6DoF 비교 분석 (~150줄)
│    └── 두 모델의 궤적 차이 시각화
│
├── requirements.txt          # Python 의존성 목록
├── README.md                  # 프로젝트 설명서
├── CONTRIBUTION.md            # 조원별 기여도 문서
└── description.md            # 본 문서
│
└── results_6dof/              # 시뮬레이션 결과 저장 폴더
    └── 6dof_results_*.png      # 시각화 결과 이미지
```

### 주요 파일 설명

#### `main_fixed.py` (978줄)

  - **핵심 시뮬레이션 엔진**: 6DOF 운동방정식 구현
  - **라인 22-37**: 그래프 저장/표시 유틸리티
  - **라인 181-196**: 오일러 각도 변환 (안정화, 짐벌락 방지)
  - **라인 198-227**: 공력 모멘트 계산 (스무딩 및 제한 적용)
  - **라인 229-287**: 수직 상승 동역학
  - **라인 289-344**: 피치 전환 동역학
  - **라인 346-348**: 등자세 비행 동역학
  - **라인 350-391**: 중간단계 동역학
  - **라인 400-520**: 시뮬레이션 통합 실행 (모드 2)
  - **라인 522-800**: 실시간 3D 시각화 (모드 1)
  - **라인 802-931**: 12-패널 상세 시각화

#### `config_6dof.py` (445줄)

  - **PhysicsUtils (라인 22-77)**: 표준 대기 모델, 중력 계산, 마하수 계산
  - **StateVector6DOF (라인 79-162)**: 14차원 상태 벡터 정의 및 검증
  - **MISSILE\_TYPES (라인 164-302)**: 3종 미사일 물리 데이터
       - 질량, 추력, 관성 모멘트, 공력 계수, 연소 시간 등

#### `compare_3dof_6dof.py` (~150줄)

  - 3DoF와 6DoF 시뮬레이션 결과 비교
  - 궤적 차이, 도달 거리 오차, 자세 안정성 분석

-----

## 개발 환경

### IDE 및 편집기

  - **Visual Studio Code** (권장)
       - Python Extension 설치
       - Pylance (타입 체킹)
       - Jupyter Extension (데이터 분석)
  - **PyCharm Professional** (대안)
       - Scientific Mode 활용

### 버전 관리

  - **Git**: 소스 코드 버전 관리
  - **GitHub**: 원격 저장소 및 협업
       - Repository: `https://github.com/leeejunseo/data-science`
       - Branch 전략: `main` (안정 버전), `dev` (개발 버전)

### 협업 도구

  - **GitHub**: 작업 및 코드 관리 
  - **Google Docs**: 설계 문서 및 회의록 공유
  - **카카오톡**: 일상 소통
  - **정기회의**: 매주 금요일 


### 테스트 환경

  - **물리 검증**: 논문 데이터와 비교 검증
  - **시각적 검증**: 궤적 그래프 육안 확인

-----

## 프로젝트 분석: 장점 및 단점

### 장점

* **6DoF 기본 구조 확장**: 3DoF 모델에 회전 운동(롤, 피치, 요 각도 및 각속도) 상태 변수를 추가하고 오일러 방정식을 통해 각속도를 계산하여 6DoF 시뮬레이션의 기본 틀을 구축했습니다.
* **물리 파라미터 도입**: 회전 운동 계산에 필요한 관성 모멘트와 공력 모멘트 계수를 `config_6dof.py`에 정의하고 시뮬레이션에 반영했습니다.
* **4단계 비행 프로그램**: 수직 상승, 피치 기동, 등자세 비행, 중간 단계 비행 등 각 단계별로 구분된 동역학 모델을 적용하여 비행 과정을 모사했습니다.
* **수치 안정성 개선 노력**: `main_fixed.py`에서는 실시간 시뮬레이션 중단 버그를 수정하고, 공력 모멘트 및 오일러 각 계산 시 제한(clipping)을 적용하여 수치적 발산을 억제하려 시도했습니다.
* **모듈화 및 설정 관리**: 물리 상수, 미사일 제원, 상태 벡터 정의 등을 `config_6dof.py` 파일로 분리하여 관리 용이성을 높였습니다.
* **상세한 시각화**: 3D 궤적, 속도, 고도뿐 아니라 오일러 각도, 각속도 등 12개 패널의 상세 그래프와 실시간 3D 궤적 애니메이션 기능을 제공하여 결과 분석의 편의성을 높였습니다.
* **체계적인 문서화**: 프로젝트 소개, 아키텍처, 사용법, 개발 가이드, 기여도 등 다양한 문서를 통해 프로젝트의 이해와 활용을 돕습니다.

---

### 단점

* **물리적 커플링(Coupling) 부재**: 병진 운동 계산 시 각속도의 영향(`rv-qw` 등)이 반영되지 않았고, 미사일 자세 변화가 힘(중력, 공력 등)의 방향 벡터 변환에 사용되지 않아 병진 운동과 회전 운동이 완전히 연동되지 않았습니다. 이는 "패션 6DoF" 또는 유사 6DoF 모델의 특징입니다.
* **질량 변화에 따른 동적 특성 미반영**: 연료 소모에 따른 질량 감소는 계산되지만, 이로 인한 무게 중심(CG) 이동이나 관성 모멘트 텐서의 변화는 시뮬레이션 중에 업데이트되지 않습니다. 이는 특히 연소 시간이 긴 미사일의 실제 동적 안정성에 영향을 줄 수 있습니다.
* **단순화된 공력 모델**: 받음각(alpha)을 피치각(theta)과 비행경로각(gamma)의 차이로 단순화하여 정의했고, 측면 받음각(beta)은 0으로 고정했습니다. 진정한 6DoF에서는 보통 Body Frame 속도 성분(u, v, w)을 사용하여 계산합니다.

---
-----
## 향후 계획: 데이터 과학 기반의 접근 (EDA)

향후 기말 과제에서는 시뮬레이터의 단순 기능 개선을 넘어, 이 과목의 취지에 맞게 **데이터 과학적 분석**에 집중하고자 합니다. 먼저 현재 시뮬레이터의 물리적 정확성을 높이기 위한 개선 작업을 진행한 후, 이를 기반으로 대규모 데이터를 생성하고 분석할 계획입니다.

### 1단계: 시뮬레이터 정확성 향상 및 안정화

* **목표**: 대규모 데이터 생성 및 신뢰성 있는 분석을 위해 시뮬레이터의 **물리적 정확성을 높이고 안정성을 확보**합니다.
* **세부 계획**:
    * **진정한 6DoF 동역학 구현**: 현재 병진 운동과 회전 운동이 완전히 연동되지 않은 문제를 해결합니다.
        * 병진 운동 방정식에 각속도 항을 추가하여 회전 운동이 병진 운동에 미치는 영향을 반영합니다.
        * 좌표 변환(DCM 또는 쿼터니언 활용)을 통해 힘(중력, 공력, 추력) 벡터를 올바른 좌표계에서 계산하고 적용하여 **병진-회전 운동의 완전한 물리적 연결**을 구현합니다.
    * **정교한 공력 모델 도입**: 단순화된 받음각 정의 및 측면 받음각 무시 문제를 개선합니다.
        * 받음각(α)과 측면 받음각(β)을 Body Frame 속도 성분(`u, v, w`)을 기반으로 정확하게 계산하고, 이를 공력 계수(힘, 모멘트) 계산에 반영합니다.
    * **연료 소모에 따른 동역학 개선**: 현재 미반영된 질량 변화 효과를 추가합니다.
        * 연료 소모에 따라 변화하는 **무게중심 이동**과 **관성 모멘트 텐서의 동적 변화**를 모델링하고 시뮬레이션에 반영합니다.
    * **자세 표현 방식 개선 및 안정화**: 현재 오일러 각 기반 시스템의 잠재적 문제를 해결합니다.
        * 필요시 쿼터니언(Quaternion) 기반 자세 표현 및 미분 방정식으로 전환하여 짐벌락(Gimbal Lock) 문제를 원천적으로 방지하고 수치적 안정성을 높입니다.
    * **오류 수정 및 안정화**: 다양한 발사 조건에서도 시뮬레이션이 중단되지 않도록 안정성을 높입니다.

### 2단계: 대규모 데이터 생성

* **목표**: 개선된 고충실도 시뮬레이터를 사용하여 머신러닝 모델 학습에 적합한 **대규모 궤적 데이터셋을 구축**합니다.
* **세부 계획**:
    * `config_6dof.py`에 정의된 여러 미사일 탄종(SCUD-B, NODONG, KN-23 등)에 대해, 발사각(10°~80°, 3° 간격)과 방위각(30°~150°, 15° 간격) 등 초기 조건을 체계적으로 변경하며 **수천 개 이상의 궤적 데이터를 생성**합니다.
    * 현실성을 높이기 위해 각 조합에 작은 노이즈(발사각 ±0.3°, 방위각 ±0.5° 등)를 추가하여 여러 샘플을 생성합니다.

### 3단계: 탐색적 데이터 분석(EDA) 및 시그니처 도출

* **목표**: 생성된 대규모 궤적 데이터셋을 분석하여, 탄종별로 뚜렷하게 구별되는 **고유 비행 특성(시그니처)을 발굴**합니다.
* **세부 계획**:
    1.  **특징 추출(Feature Engineering)**: 각 궤적 데이터로부터 유의미한 물리적 특징 10여 개를 추출합니다.
        * **부스트 단계**: 최대 가속도, 연소 종료 시점 고도/속도, 연소 시간 등
        * **중간 단계**: 최고 고도(Apogee), 최고 고도 도달 시간, 비행 시간 등
        * **종말 단계**: 재진입 각도, 최대 감속도, 종말 속도 등
        * **궤적 형태**: 사거리 대비 최고 고도 비율, 비행 경로 길이 등
    2.  **탐색적 데이터 분석(EDA)**: 추출된 특징들을 시각화하고 통계적으로 분석하여 탄종별 데이터 분포의 차이를 확인합니다.
        * **시각화**: 특징 조합에 따른 2D/3D 산점도(Scatter Plot), 바이올린 플롯(Violin Plot), 평행 좌표 플롯(Parallel Coordinates Plot) 등을 사용하여 탄종별 군집(Cluster) 형성 및 분리 가능성을 탐색합니다.
        * **통계 분석**: 각 특징에 대해 분산 분석(ANOVA), t-검정(t-test) 등을 수행하여 탄종 간 유의미한 차이를 보이는 특징을 식별하고 정량화합니다 (예: F-statistic, p-value 확인). 주성분 분석(PCA) 등을 통해 특징 공간에서의 분포를 확인합니다.
    3.  **결과 해석 및 시그니처 정의**: 분석 결과를 바탕으로 각 탄도미사일의 고유한 비행 특성, 즉 **시그니처를 명확하게 정의하고 기술**합니다. 예를 들어, "KN-23은 낮은 최고 고도와 상대적으로 긴 연소 시간을 가지며, 종말 단계에서 높은 감속도를 보인다" 와 같이 구체적인 특성을 제시합니다.
-----

## 참고 문헌

1.  **Belkacem, B., & Bachir, N. (2019)**. "Simulation of 6DOF Nonlinear Missile"
       - 6DoF 운동방정식 및 검증 방법론

2.  **ISO 2533:1975**. "Standard Atmosphere"
       - 표준 대기 모델 (ISA)

3.  **교수님 제공 3DoF 코드**
       - 기본 탄도 미사일 시뮬레이션 프레임워크

-----

## 협업 도구

1. windsurf plus
2. Gemini pro
3. Claude pro
4. Chat gpt

-----

## 팀 정보

| 이름 | 역할 | 기여율 |
|------|------|--------|
| 이준서 | 6DoF 물리 엔진 및 동역학 구현 | 30% |
| 정연우 | 6DoF 자세 시스템 및 config 구현 | 30% |
| 김찬진 | 논문 분석 및 데이터 설계 | 20% |
| 박윤준 | 물리량 분석 및 검증 설계 | 20% |

**작성일**: 2025.10.28  
**최종 수정**: 2025.10.28 (main_fixed.py 반영)
