# 6DOF 미사일 궤적 시뮬레이션 프로젝트

## 프로젝트 소개

본 프로젝트는 **3자유도(3DoF) 탄도 미사일 시뮬레이션을 6자유도(6DoF)로 확장**하여 회전 운동(롤, 피치, 요)을 포함한 고정밀 미사일 궤적 시뮬레이션 시스템을 구현합니다. 기존 3DoF 모델은 미사일을 질점으로 가정하여 병진 운동만 고려했지만, 본 프로젝트는 오일러 각도 기반 자세 시스템, 공력 모멘트 계산, 관성 텐서를 도입하여 실제 미사일의 복잡한 비행 역학을 정확히 모델링합니다. 이를 통해 SCUD-B, NODONG, KN-23 등 북한 탄도미사일의 궤적 특성을 분석하고, 머신러닝 학습을 위한 고품질 시뮬레이션 데이터를 생성할 수 있습니다.

**해결하려는 문제**: 기존 3DoF 시뮬레이션의 한계(회전 운동 무시, 자세 불안정성 미반영)를 극복하고, 실제 미사일 비행의 물리적 현상을 정확히 재현하여 탄도미사일 방어 시스템 연구 및 궤적 예측 모델 개발에 기여합니다.

-----

## 주요 기능

### 1\. **6자유도 물리 엔진**

  - **병진 운동 (3DoF)**: 속도(V), 비행경로각(γ), 방위각(ψ), 위치(x, y, h) 계산
  - **회전 운동 (3DoF)**: 롤(φ), 피치(θ), 요(ψ) 오일러 각도 및 각속도(p, q, r) 계산
  - **14차원 상태 벡터**: 병진 6차원 + 회전 6차원 + 질량 2차원 통합 관리
  - **공력 모멘트**: 받음각/측면 받음각 기반 롤/피치/요 모멘트 계산
  - **오일러 방정식**: 자이로스코픽 효과를 포함한 회전 동역학 구현

### 2\. **4단계 비행 프로그램**

  - **수직 상승 단계**: 발사대에서 수직으로 상승 (0\~5초)
  - **피치 전환 단계**: 목표 피치각으로 자세 변경 (5\~15초)
  - **등자세 비행 단계**: 일정 자세 유지하며 추력 비행 (15\~60초)
  - **중간단계 비행**: 추력 종료 후 관성 비행 및 대기권 재진입 (\~1500초)
  - **RK45 수치 적분**: scipy.integrate.solve\_ivp를 활용한 고정밀 궤적 계산
  - **안정화 개선**: 78km 멈춤 버그 수정, 공력 모멘트 계산 안정화

### 3\. **다중 미사일 지원**

  - **SCUD-B**: 사거리 300km, 단거리 탄도미사일
  - **NODONG**: 사거리 1,300km, 중거리 탄도미사일
  - **KN-23**: 사거리 690km, 준탄도 미사일 (낮은 궤적)
  - 각 미사일별 추력 프로파일, 관성 모멘트, 공력 계수 데이터베이스 구축

### 4\. **고급 시각화 시스템**

  - **12-패널 통합 그래프**: 3D 궤적, 속도, 고도, 비행경로각, 롤/피치/요 각도, 각속도, 질량 변화 등
  - **실시간 저장**: 고해상도(300 DPI) PNG 이미지로 결과 저장
  - **matplotlib 기반**: 과학적 시각화 표준 라이브러리 활용

### 5\. **물리 모델 검증**

  - **표준 대기 모델 (ISA)**: 고도별 대기 밀도, 온도, 압력 계산
  - **마하수 기반 항력 계수**: 초음속/천음속 영역 항력 변화 반영
  - **에너지 보존 검증**: 운동 에너지 + 위치 에너지 추적
  - **특이점 처리**: 짐벌락 방지를 위한 오일러 각도 안정화

-----

## 시스템 요구사항

### Python 환경

  - **Python 3.9+** (권장: Python 3.10 이상)
  - **운영체제**: Windows 10/11, macOS, Linux (Ubuntu 20.04+)

### 필수 라이브러리

```
numpy>=1.24.0          # 수치 계산 및 배열 연산
scipy>=1.10.0          # 수치 적분 (solve_ivp)
matplotlib>=3.7.0      # 시각화
```

### 선택적 라이브러리

```
tqdm>=4.65.0            # 진행 표시 (데이터 생성 시)
pandas>=2.0.0          # 데이터 분석 (선택)
```

### 하드웨어 권장사항

  - **CPU**: 2 GHz 이상 (멀티코어 권장)
  - **RAM**: 4 GB 이상 (8 GB 권장)
  - **저장공간**: 500 MB 이상 (시뮬레이션 결과 저장용)

-----

## 설치 및 실행

### 1\. 저장소 클론

```bash
git clone https://github.com/leeejunseo/data-science.git
cd data-science/leejunseo
```

### 2\. 의존성 설치

```bash
pip install -r requirements.txt
```

또는 개별 설치:

```bash
pip install numpy scipy matplotlib
```

### 3\. 프로그램 실행

#### 기본 실행 (SCUD-B, 발사각 45°)

```bash
python main_fixed.py
```

#### 사용자 정의 실행 예시

```python
from main_fixed import MissileSimulation6DOF

# 시뮬레이션 객체 생성
sim = MissileSimulation6DOF(missile_type="NODONG", apply_errors=False)

# 초기화 (발사각 60°, 방위각 90°)
sim.initialize_simulation(launch_angle_deg=60, azimuth_deg=90, sim_time=1500)

# 시뮬레이션 실행
results = sim.run_simulation()

# 결과 시각화
sim.plot_results_6dof()

# 결과 출력
print(f"최종 사거리: {results['x'][-1]/1000:.2f} km")
print(f"최대 고도: {max(results['h'])/1000:.2f} km")
```

### 4\. 실행 결과

시뮬레이션 실행 후 다음과 같은 출력을 확인할 수 있습니다:

```
============================================================
6DOF 미사일 시뮬레이션 시작
============================================================
1단계: 수직상승
2단계: 피치 전환
3단계: 등자세 비행
4단계: 중간단계 비행
지면 충돌 감지: 652.34초
시뮬레이션 계산 완료! 전체 비행 시간: 652.34초

============================================================
6DOF 시뮬레이션 결과 요약
============================================================
최종 사거리: 298.45 km
최대 고도: 87.23 km
최종 속도: 1456.78 m/s
비행 시간: 652.34 s
최종 롤각: 0.12°
최종 피치각: -78.45°
최종 요각: 90.03°
============================================================
```

**결과 파일**: `results_6dof/6dof_results_YYYYMMDD_HHMMSS.png`

-----

## 프로젝트 구조

```
JJINleejunseo/
│
├── main_fixed.py             # 6DOF 시뮬레이션 메인 파일 (978줄)
│    ├── MissileSimulation6DOF 클래스
│    ├── 4단계 동역학 함수 (vertical, pitch, constant, midcourse)
│    ├── 공력 모멘트 계산 (calculate_aerodynamic_moments - 안정화)
│    ├── 오일러 각도 변환 (calculate_euler_rates - 짐벌락 방지)
│    ├── 실시간 시각화 (run_simulation_realtime)
│    └── 상세 시각화 (plot_results_6dof)
│
├── config_6dof.py            # 물리 모델 및 미사일 데이터 (445줄)
│     ├── PhysicsUtils 클래스 (대기 모델, 중력, 음속)
│     ├── StateVector6DOF 클래스 (14차원 상태 벡터 관리)
│     └── MISSILE_TYPES 데이터베이스 (SCUD-B, NODONG, KN-23)
│
├── compare_3dof_6dof.py      # 3DoF vs 6DoF 비교 분석 (~150줄)
│    └── 두 모델의 궤적 차이 시각화
│
├── requirements.txt          # Python 의존성 목록
├── README.md                  # 프로젝트 설명서
├── CONTRIBUTION.md            # 조원별 기여도 문서
└── description.md            # 본 문서
│
└── results_6dof/              # 시뮬레이션 결과 저장 폴더
    └── 6dof_results_*.png      # 시각화 결과 이미지
```

### 주요 파일 설명

#### `main_fixed.py` (978줄)

  - **핵심 시뮬레이션 엔진**: 6DOF 운동방정식 구현
  - **라인 22-37**: 그래프 저장/표시 유틸리티
  - **라인 181-196**: 오일러 각도 변환 (안정화, 짐벌락 방지)
  - **라인 198-227**: 공력 모멘트 계산 (스무딩 및 제한 적용)
  - **라인 229-287**: 수직 상승 동역학
  - **라인 289-344**: 피치 전환 동역학
  - **라인 346-348**: 등자세 비행 동역학
  - **라인 350-391**: 중간단계 동역학
  - **라인 400-520**: 시뮬레이션 통합 실행 (모드 2)
  - **라인 522-800**: 실시간 3D 시각화 (모드 1)
  - **라인 802-931**: 12-패널 상세 시각화

#### `config_6dof.py` (445줄)

  - **PhysicsUtils (라인 22-77)**: 표준 대기 모델, 중력 계산, 마하수 계산
  - **StateVector6DOF (라인 79-162)**: 14차원 상태 벡터 정의 및 검증
  - **MISSILE\_TYPES (라인 164-302)**: 3종 미사일 물리 데이터
       - 질량, 추력, 관성 모멘트, 공력 계수, 연소 시간 등

#### `compare_3dof_6dof.py` (~150줄)

  - 3DoF와 6DoF 시뮬레이션 결과 비교
  - 궤적 차이, 도달 거리 오차, 자세 안정성 분석

-----

## 개발 환경

### IDE 및 편집기

  - **Visual Studio Code** (권장)
       - Python Extension 설치
       - Pylance (타입 체킹)
       - Jupyter Extension (데이터 분석)
  - **PyCharm Professional** (대안)
       - Scientific Mode 활용

### 버전 관리

  - **Git**: 소스 코드 버전 관리
  - **GitHub**: 원격 저장소 및 협업
       - Repository: `https://github.com/leeejunseo/data-science`
       - Branch 전략: `main` (안정 버전), `dev` (개발 버전)

### 협업 도구

  - **GitHub**: 작업 및 코드 관리 
  - **Google Docs**: 설계 문서 및 회의록 공유
  - **카카오톡**: 일상 소통
  - **정기회의**: 매주 금요일 


### 테스트 환경

  - **물리 검증**: 논문 데이터와 비교 검증
  - **시각적 검증**: 궤적 그래프 육안 확인

-----

## 향후 계획: 데이터 과학 기반의 접근 (EDA)

향후 기말 과제에서는 시뮬레이터의 단순 기능 개선을 넘어, 이 과목의 취지에 맞게 **데이터 과학적 분석**에 집중하고자 합니다.

### 1단계: 시뮬레이터 안정화 및 데이터 생성

-   **목표**: 대규모 데이터 생성을 위한 시뮬레이터의 안정성 및 신뢰도 확보.
-   **세부 계획**:
    -   **오류 수정 및 안정화**: 다양한 발사 조건에서도 시뮬레이션이 중단되지 않도록 안정성을 높입니다.
        -   **쿼터니언 기반 구현 개선**: 초기에 쿼터니언 기반으로 자세 시스템을 구현했을 때 그래프 구현이 제대로 작동하지 않는 문제가 발생했습니다. 이후 그래프 시각화에 집중하여 수정하는 과정에서 물리량 반영이 정확하지 않은 문제가 나타났습니다. 향후 이러한 자세 표현 방식과 시각화, 물리 엔진 간의 통합 문제를 근본적으로 해결하여 시뮬레이터의 정확도와 안정성을 향상시킬 계획입니다.
    -   **대규모 궤적 데이터 생성**: `config_6dof.py`에 정의된 여러 미사일 탄종에 대해, 발사각과 방위각 등 초기 조건을 변경하며 **수천 개 이상의 궤적 데이터셋을 구축**합니다. (예: 24개 발사각 × 9개 방위각 × 6개 탄종 ≈ 1,296개 궤적)

### 2단계: 탐색적 데이터 분석 (EDA) 및 시그니처 도출

-   **목표**: 생성된 대규모 궤적 데이터셋을 분석하여, 탄종별로 뚜렷하게 구별되는 **고유 비행 특성(시그니처)을 발굴**합니다.
-   **세부 계획**:
    1.  **특징 추출(Feature Engineering)**: 각 궤적 데이터로부터 유의미한 물리적 특징 10여 개를 추출합니다.
        -   **부스트 단계**: 최대 가속도, 연소 종료 시점 고도 및 속도 등
        -   **중간 단계**: 최고 고도(Apogee), 최고 고도 도달 시간 등
        -   **종말 단계**: 재진입 각도, 최대 감속도, 종말 속도 등
    2.  **탐색적 데이터 분석(EDA)**: 추출된 특징들을 시각화하고 통계적으로 분석하여 탄종별 데이터 분포의 차이를 확인합니다.
        -   **시각화**: 특정 특징 조합(예: 최고 고도 vs 연소 종료 속도)을 축으로 하는 2D 산점도(Scatter Plot)를 그려 탄종별 군집(Cluster)이 형성되는지 확인합니다.
        -   **통계 분석**: 각 특징에 대해 분산 분석(ANOVA) 등을 수행하여, 어떤 특징이 탄종을 가장 잘 구별하는지 정량적으로 평가합니다. (예: F-statistic 값 확인)
    3.  **결과 해석**: 분석 결과를 바탕으로 "SCUD-B 미사일은 최고 고도는 낮지만 재진입 각도가 크다" 와 같은 탄종별 고유 시그니처를 정의하고 제시합니다.

-----

## 참고 문헌

1.  **Belkacem, B., & Bachir, N. (2019)**. "Simulation of 6DOF Nonlinear Missile"
       - 6DoF 운동방정식 및 검증 방법론

2.  **ISO 2533:1975**. "Standard Atmosphere"
       - 표준 대기 모델 (ISA)

3.  **교수님 제공 3DoF 코드**
       - 기본 탄도 미사일 시뮬레이션 프레임워크

-----

## 협업 도구

1. windsurf plus
2. Gemini pro
3. Claude pro
4. Chat gpt

-----

## 팀 정보

| 이름 | 역할 | 기여율 |
|------|------|--------|
| 이준서 | 6DoF 물리 엔진 및 동역학 구현 | 30% |
| 정연우 | 6DoF 자세 시스템 및 config 구현 | 30% |
| 김찬진 | 논문 분석 및 데이터 설계 | 20% |
| 박윤준 | 물리량 분석 및 검증 설계 | 20% |

**작성일**: 2025.10.28  
**최종 수정**: 2025.10.28 (main_fixed.py 반영)
